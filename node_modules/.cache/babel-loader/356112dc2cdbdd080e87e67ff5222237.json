{"ast":null,"code":"import { addUniqueItem, removeItem } from '@motionone/utils';\nlet scheduled = undefined;\n\nfunction processScheduledAnimations() {\n  if (!scheduled) return;\n  const generators = scheduled.sort(compareByDepth).map(fireAnimateUpdates);\n  generators.forEach(fireNext);\n  generators.forEach(fireNext);\n  scheduled = undefined;\n}\n\nfunction scheduleAnimation(state) {\n  if (!scheduled) {\n    scheduled = [state];\n    requestAnimationFrame(processScheduledAnimations);\n  } else {\n    addUniqueItem(scheduled, state);\n  }\n}\n\nfunction unscheduleAnimation(state) {\n  scheduled && removeItem(scheduled, state);\n}\n\nconst compareByDepth = (a, b) => a.getDepth() - b.getDepth();\n\nconst fireAnimateUpdates = state => state.animateUpdates();\n\nconst fireNext = iterator => iterator.next();\n\nexport { scheduleAnimation, unscheduleAnimation };","map":null,"metadata":{},"sourceType":"module"}